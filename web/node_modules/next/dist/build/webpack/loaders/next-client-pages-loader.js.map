{"version":3,"sources":["../../../../build/webpack/loaders/next-client-pages-loader.ts"],"names":["nextClientPagesLoader","pagesLoaderSpan","currentTraceSpan","traceChild","traceFn","absolutePagePath","page","loaderUtils","getOptions","setAttribute","stringifiedAbsolutePagePath","JSON","stringify","stringifiedPage"],"mappings":"4DAAA,oF,mFAOA;AACA,QAASA,CAAAA,qBAAT,EAA0C,CACxC,KAAMC,CAAAA,eAAe,CAAG,KAAKC,gBAAL,CAAsBC,UAAtB,CACtB,0BADsB,CAAxB,CAIA,MAAOF,CAAAA,eAAe,CAACG,OAAhB,CAAwB,IAAM,CACnC,KAAM,CAAEC,gBAAF,CAAoBC,IAApB,EAA6BC,qBAAYC,UAAZ,CACjC,IADiC,CAAnC,CAIAP,eAAe,CAACQ,YAAhB,CAA6B,kBAA7B,CAAiDJ,gBAAjD,EAEA,KAAMK,CAAAA,2BAA2B,CAAGC,IAAI,CAACC,SAAL,CAAeP,gBAAf,CAApC,CACA,KAAMQ,CAAAA,eAAe,CAAGF,IAAI,CAACC,SAAL,CAAeN,IAAf,CAAxB,CAEA,MAAQ;AACZ;AACA,QAAQO,eAAgB;AACxB;AACA,yBAAyBH,2BAA4B;AACrD;AACA;AACA,GAPI,CAQD,CAlBM,CAAP,CAmBD,C,aAEcV,qB","sourcesContent":["import loaderUtils from 'next/dist/compiled/loader-utils'\n\nexport type ClientPagesLoaderOptions = {\n  absolutePagePath: string\n  page: string\n}\n\n// this parameter: https://www.typescriptlang.org/docs/handbook/functions.html#this-parameters\nfunction nextClientPagesLoader(this: any) {\n  const pagesLoaderSpan = this.currentTraceSpan.traceChild(\n    'next-client-pages-loader'\n  )\n\n  return pagesLoaderSpan.traceFn(() => {\n    const { absolutePagePath, page } = loaderUtils.getOptions(\n      this\n    ) as ClientPagesLoaderOptions\n\n    pagesLoaderSpan.setAttribute('absolutePagePath', absolutePagePath)\n\n    const stringifiedAbsolutePagePath = JSON.stringify(absolutePagePath)\n    const stringifiedPage = JSON.stringify(page)\n\n    return `\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      ${stringifiedPage},\n      function () {\n        return require(${stringifiedAbsolutePagePath});\n      }\n    ]);\n  `\n  })\n}\n\nexport default nextClientPagesLoader\n"]}