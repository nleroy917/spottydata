{"version":3,"sources":["../../../../../next-server/server/lib/squoosh/emscripten-utils.ts"],"names":["pathify","path","startsWith","instantiateEmscriptenWasm","factory","locateFile"],"mappings":"yHAAA,wBAEO,QAASA,CAAAA,OAAT,CAAiBC,IAAjB,CAA+B,CACpC,GAAIA,IAAI,CAACC,UAAL,CAAgB,SAAhB,CAAJ,CAAgC,CAC9BD,IAAI,CAAG,uBAAcA,IAAd,CAAP,CACD,CACD,MAAOA,CAAAA,IAAP,CACD,CAEM,QAASE,CAAAA,yBAAT,CACLC,OADK,CAiBLH,IAjBK,CAkBL,CACA,MAAOG,CAAAA,OAAO,CAAC,CACbC,UAAU,EAAG,CACX,MAAOL,CAAAA,OAAO,CAACC,IAAD,CAAd,CACD,CAHY,CAAD,CAAd,CAKD","sourcesContent":["import { fileURLToPath } from 'url'\n\nexport function pathify(path: string) {\n  if (path.startsWith('file://')) {\n    path = fileURLToPath(path)\n  }\n  return path\n}\n\nexport function instantiateEmscriptenWasm(\n  factory: (args: {\n    locateFile: () => string\n  }) => {\n    decode?: (\n      buffer: Buffer | Uint8Array,\n      width: number,\n      height: number,\n      opts: any\n    ) => Buffer\n    encode?: (\n      buffer: Buffer | Uint8Array,\n      width: number,\n      height: number,\n      opts: any\n    ) => Buffer\n  },\n  path: string\n) {\n  return factory({\n    locateFile() {\n      return pathify(path)\n    },\n  })\n}\n"]}