{"version":3,"sources":["../../../../../../next-server/server/lib/squoosh/png/squoosh_png.js"],"names":["wasm","cachedTextDecoder","TextDecoder","ignoreBOM","fatal","decode","cachegetUint8Memory0","getUint8Memory0","buffer","memory","Uint8Array","getStringFromWasm0","ptr","len","subarray","cachegetUint8ClampedMemory0","getUint8ClampedMemory0","Uint8ClampedArray","getClampedArrayU8FromWasm0","heap","Array","fill","undefined","push","heap_next","length","addHeapObject","obj","idx","WASM_VECTOR_LEN","passArray8ToWasm0","arg","malloc","set","cachegetInt32Memory0","getInt32Memory0","Int32Array","getArrayU8FromWasm0","encode","data","width","height","retptr","__wbindgen_export_1","value","ptr0","__wbindgen_malloc","len0","r0","r1","v1","slice","__wbindgen_free","getObject","dropObject","takeObject","ret","load","module","imports","Response","WebAssembly","instantiateStreaming","e","headers","get","console","warn","bytes","arrayBuffer","instantiate","instance","Instance","init","input","Error","wbg","__wbg_newwithownedu8clampedarrayandsh_787b2db8ea6bfd62","arg0","arg1","arg2","arg3","v0","ImageData","__wbindgen_throw","Request","URL","fetch","exports","__wbindgen_wasm_module","cleanup"],"mappings":"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","sourcesContent":["import { TextDecoder } from '../text-decoder'\n\nlet wasm\n\nlet cachedTextDecoder = new TextDecoder('utf-8', {\n  ignoreBOM: true,\n  fatal: true,\n})\n\ncachedTextDecoder.decode()\n\nlet cachegetUint8Memory0 = null\nfunction getUint8Memory0() {\n  if (\n    cachegetUint8Memory0 === null ||\n    cachegetUint8Memory0.buffer !== wasm.memory.buffer\n  ) {\n    cachegetUint8Memory0 = new Uint8Array(wasm.memory.buffer)\n  }\n  return cachegetUint8Memory0\n}\n\nfunction getStringFromWasm0(ptr, len) {\n  return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len))\n}\n\nlet cachegetUint8ClampedMemory0 = null\nfunction getUint8ClampedMemory0() {\n  if (\n    cachegetUint8ClampedMemory0 === null ||\n    cachegetUint8ClampedMemory0.buffer !== wasm.memory.buffer\n  ) {\n    cachegetUint8ClampedMemory0 = new Uint8ClampedArray(wasm.memory.buffer)\n  }\n  return cachegetUint8ClampedMemory0\n}\n\nfunction getClampedArrayU8FromWasm0(ptr, len) {\n  return getUint8ClampedMemory0().subarray(ptr / 1, ptr / 1 + len)\n}\n\nconst heap = new Array(32).fill(undefined)\n\nheap.push(undefined, null, true, false)\n\nlet heap_next = heap.length\n\nfunction addHeapObject(obj) {\n  if (heap_next === heap.length) heap.push(heap.length + 1)\n  const idx = heap_next\n  heap_next = heap[idx]\n\n  heap[idx] = obj\n  return idx\n}\n\nlet WASM_VECTOR_LEN = 0\n\nfunction passArray8ToWasm0(arg, malloc) {\n  const ptr = malloc(arg.length * 1)\n  getUint8Memory0().set(arg, ptr / 1)\n  WASM_VECTOR_LEN = arg.length\n  return ptr\n}\n\nlet cachegetInt32Memory0 = null\nfunction getInt32Memory0() {\n  if (\n    cachegetInt32Memory0 === null ||\n    cachegetInt32Memory0.buffer !== wasm.memory.buffer\n  ) {\n    cachegetInt32Memory0 = new Int32Array(wasm.memory.buffer)\n  }\n  return cachegetInt32Memory0\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n  return getUint8Memory0().subarray(ptr / 1, ptr / 1 + len)\n}\n/**\n * @param {Uint8Array} data\n * @param {number} width\n * @param {number} height\n * @returns {Uint8Array}\n */\nexport function encode(data, width, height) {\n  try {\n    const retptr = wasm.__wbindgen_export_1.value - 16\n    wasm.__wbindgen_export_1.value = retptr\n    var ptr0 = passArray8ToWasm0(data, wasm.__wbindgen_malloc)\n    var len0 = WASM_VECTOR_LEN\n    wasm.encode(retptr, ptr0, len0, width, height)\n    var r0 = getInt32Memory0()[retptr / 4 + 0]\n    var r1 = getInt32Memory0()[retptr / 4 + 1]\n    var v1 = getArrayU8FromWasm0(r0, r1).slice()\n    wasm.__wbindgen_free(r0, r1 * 1)\n    return v1\n  } finally {\n    wasm.__wbindgen_export_1.value += 16\n  }\n}\n\nfunction getObject(idx) {\n  return heap[idx]\n}\n\nfunction dropObject(idx) {\n  if (idx < 36) return\n  heap[idx] = heap_next\n  heap_next = idx\n}\n\nfunction takeObject(idx) {\n  const ret = getObject(idx)\n  dropObject(idx)\n  return ret\n}\n/**\n * @param {Uint8Array} data\n * @returns {ImageData}\n */\nexport function decode(data) {\n  var ptr0 = passArray8ToWasm0(data, wasm.__wbindgen_malloc)\n  var len0 = WASM_VECTOR_LEN\n  var ret = wasm.decode(ptr0, len0)\n  return takeObject(ret)\n}\n\nasync function load(module, imports) {\n  if (typeof Response === 'function' && module instanceof Response) {\n    if (typeof WebAssembly.instantiateStreaming === 'function') {\n      try {\n        return await WebAssembly.instantiateStreaming(module, imports)\n      } catch (e) {\n        if (module.headers.get('Content-Type') !== 'application/wasm') {\n          console.warn(\n            '`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n',\n            e\n          )\n        } else {\n          throw e\n        }\n      }\n    }\n\n    const bytes = await module.arrayBuffer()\n    return await WebAssembly.instantiate(bytes, imports)\n  } else {\n    const instance = await WebAssembly.instantiate(module, imports)\n\n    if (instance instanceof WebAssembly.Instance) {\n      return { instance, module }\n    } else {\n      return instance\n    }\n  }\n}\n\nasync function init(input) {\n  if (typeof input === 'undefined') {\n    // input = import.meta.url.replace(/\\.js$/, '_bg.wasm')\n    throw new Error('invariant')\n  }\n  const imports = {}\n  imports.wbg = {}\n  imports.wbg.__wbg_newwithownedu8clampedarrayandsh_787b2db8ea6bfd62 = function (\n    arg0,\n    arg1,\n    arg2,\n    arg3\n  ) {\n    var v0 = getClampedArrayU8FromWasm0(arg0, arg1).slice()\n    wasm.__wbindgen_free(arg0, arg1 * 1)\n    var ret = new ImageData(v0, arg2 >>> 0, arg3 >>> 0)\n    return addHeapObject(ret)\n  }\n  imports.wbg.__wbindgen_throw = function (arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1))\n  }\n  if (\n    typeof input === 'string' ||\n    (typeof Request === 'function' && input instanceof Request) ||\n    (typeof URL === 'function' && input instanceof URL)\n  ) {\n    input = fetch(input)\n  }\n\n  const { instance, module } = await load(await input, imports)\n\n  wasm = instance.exports\n  init.__wbindgen_wasm_module = module\n\n  return wasm\n}\n\nexport default init\n\n// Manually remove the wasm and memory references to trigger GC\nexport function cleanup() {\n  wasm = null\n  cachegetUint8ClampedMemory0 = null\n  cachegetUint8Memory0 = null\n  cachegetInt32Memory0 = null\n}\n"]}