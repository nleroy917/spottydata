{"version":3,"sources":["../../../client/dev/amp-dev.js"],"names":["window","EventSource","EventSourcePolyfill","data","JSON","parse","document","getElementById","textContent","assetPrefix","page","mostRecentHash","curHash","__webpack_hash__","hotUpdatePath","endsWith","isUpdateAvailable","canApplyUpdates","module","hot","status","tryApplyUpdates","res","fetch","__webpack_runtime_id__","jsonData","json","curPage","pageUpdated","Array","isArray","c","Object","keys","some","mod","indexOf","substr","replace","location","reload","err","console","error","event","message","action","hash","ex","warn"],"mappings":"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","sourcesContent":["/* globals __webpack_hash__ */\nimport EventSourcePolyfill from './event-source-polyfill'\nimport { addMessageListener } from './error-overlay/eventsource'\nimport { setupPing } from './on-demand-entries-utils'\nimport { displayContent } from './fouc'\n\nif (!window.EventSource) {\n  window.EventSource = EventSourcePolyfill\n}\n\nconst data = JSON.parse(document.getElementById('__NEXT_DATA__').textContent)\nlet { assetPrefix, page } = data\nassetPrefix = assetPrefix || ''\nlet mostRecentHash = null\n/* eslint-disable-next-line */\nlet curHash = __webpack_hash__\nconst hotUpdatePath =\n  assetPrefix + (assetPrefix.endsWith('/') ? '' : '/') + '_next/static/webpack/'\n\n// Is there a newer version of this code available?\nfunction isUpdateAvailable() {\n  // __webpack_hash__ is the hash of the current compilation.\n  // It's a global variable injected by Webpack.\n  /* eslint-disable-next-line */\n  return mostRecentHash !== __webpack_hash__\n}\n\n// Webpack disallows updates in other states.\nfunction canApplyUpdates() {\n  return module.hot.status() === 'idle'\n}\n\n// This function reads code updates on the fly and hard\n// reloads the page when it has changed.\nasync function tryApplyUpdates() {\n  if (!isUpdateAvailable() || !canApplyUpdates()) {\n    return\n  }\n  try {\n    const res = await fetch(\n      typeof __webpack_runtime_id__ !== 'undefined'\n        ? // eslint-disable-next-line no-undef\n          `${hotUpdatePath}${curHash}.${__webpack_runtime_id__}.hot-update.json`\n        : `${hotUpdatePath}${curHash}.hot-update.json`\n    )\n    const jsonData = await res.json()\n    const curPage = page === '/' ? 'index' : page\n    // webpack 5 uses an array instead\n    const pageUpdated = (Array.isArray(jsonData.c)\n      ? jsonData.c\n      : Object.keys(jsonData.c)\n    ).some((mod) => {\n      return (\n        mod.indexOf(\n          `pages${curPage.substr(0, 1) === '/' ? curPage : `/${curPage}`}`\n        ) !== -1 ||\n        mod.indexOf(\n          `pages${\n            curPage.substr(0, 1) === '/' ? curPage : `/${curPage}`\n          }`.replace(/\\//g, '\\\\')\n        ) !== -1\n      )\n    })\n\n    if (pageUpdated) {\n      document.location.reload(true)\n    } else {\n      curHash = mostRecentHash\n    }\n  } catch (err) {\n    console.error('Error occurred checking for update', err)\n    document.location.reload(true)\n  }\n}\n\naddMessageListener((event) => {\n  if (event.data === '\\uD83D\\uDC93') {\n    return\n  }\n\n  try {\n    const message = JSON.parse(event.data)\n\n    if (message.action === 'sync' || message.action === 'built') {\n      if (!message.hash) {\n        return\n      }\n      mostRecentHash = message.hash\n      tryApplyUpdates()\n    } else if (message.action === 'reloadPage') {\n      document.location.reload(true)\n    }\n  } catch (ex) {\n    console.warn('Invalid HMR message: ' + event.data + '\\n' + ex)\n  }\n})\n\nsetupPing(assetPrefix, () => page)\ndisplayContent()\n"]}